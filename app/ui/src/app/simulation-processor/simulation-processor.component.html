<form [formGroup]="robotsConfigurationForm" (ngSubmit)="onCompute($event)">
      <div class="row">
          <div class="col-8 col-xl-7 border-end">
              
            <div class="d-flex mb-4" style="justify-content: space-between; align-items: center;">

                <h5 class="h5">Please enter your inputs below</h5>

                <div class="d-flex">
                    <button type="button" class="btn btn-sm btn-link"  data-bs-toggle="modal" data-bs-target="#inputHelpModal">Help</button>
                    <button type="button" class="btn btn-sm btn-link" [disabled]="robotsConfigurationForm.disabled" (click)="loadDefaultValues()">Load default values</button>
                </div>
            </div>
              
            <div class="row mt-5 mb-4">
                <div class="col-7 col-xl-5">
                    <p class="lead">
                        1. Grid size (upper-right coordinates):
                    </p>
                </div>
                <div class="col-2">
                    <input formControlName="gridSizeX" type="number" class="form-control" placeholder="X">
                </div>
                <div class="col-2">
                    <input formControlName="gridSizeY" type="number" class="form-control" placeholder="Y">
                </div>
            </div>

            <div>
                <div class="d-flex mb-3" style="justify-content: space-between;">

                    <p class="lead">
                        2. Robots Configuration:
                    </p>

                    <button [disabled]="robotsConfigurationForm.disabled" type="button" class="btn btn-primary btn-sm" (click)="addRobot()">Add Robot</button>

                </div>

                <div class="px-3" style="max-height: 48vh; overflow-y: auto;">

                    <table class="table table-stripped table-bordered">
                        <thead class="table-light" style="position: sticky; top: 0; z-index: 2;">
                            <tr>
                                <th scope="col" style="text-align: center; width: 16%" >
                                    #
                                </th>
                                <th scope="col" style="text-align: center; width: 35%">
                                    Robot Position
                                </th>
                                <th scope="col" style="text-align: center; width: 35%">
                                    Instructions
                                </th>
                                <th scope="col" style="text-align: center; width: 13%">
                                    Actions
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                        @for (robotConfig of robotsConfigurationForm.controls.robotConfiguration.controls; track robotConfig; let inn = $index) {

                            <tr [formGroup]="robotConfig">
                                <td style="white-space: nowrap; align-items: center; vertical-align: middle;">
                                    Robot {{inn + 1}}
                                </td>
                                <td class="d-flex" style="padding-top: 12px; padding-bottom: 12px; justify-content: center;">
                                    <input [formControl]="robotConfig.controls.robotPositionX" type="number" style="width: 23%" class="form-control form-control-sm me-2" placeholder="X">

                                    <input [formControl]="robotConfig.controls.robotPositionY" type="number" style="width: 23%" class="form-control form-control-sm me-2" placeholder="Y" >

                                    <input 
                                        [formControl]="robotConfig.controls.robotOrientation" 
                                        type="text" 
                                        style="width: 40%"
                                        class="form-control form-control-sm"
                                        placeholder="Direction"
                                        [ngClass]="{
                                            'border border-danger': !robotConfig.controls.robotOrientation.untouched &&  !robotConfig.controls.robotOrientation.valid
                                        }"
                                    >
                                </td>
                                <td style="padding-top: 12px; padding-bottom: 12px;">
                                    <input [formControl]="robotConfig.controls.robotInstructions" type="text" style="width: 87%;" class="form-control form-control-sm" placeholder="Instructions">
                                </td>
                                <td class="d-flex" style="justify-content: center;">
                                <button type="button" style="z-index: 1;" class="btn btn-sm btn-outline-danger" [disabled]="robotsConfigurationForm.disabled" (click)="removeRobot(inn)">&times;</button>
                                </td>
                            </tr>
                        }
                            
                        </tbody>
                        
                    </table>
                </div>
            </div>

            <div  class="mt-4 d-flex" style="justify-content: center;">
                <button class="btn btn-success me-2" type="submit" [disabled]="!robotsConfigurationForm.valid || robotsConfigurationForm.disabled">
                    Compute
                </button>
                <button class="btn btn-warning" type="button" [disabled]="robotsConfigurationForm.disabled" (click)="clearFields()">
                    Clear fields
                </button>
            </div>
        </div>
        <div class="col-4 col-xl-5 ps-3">
            <app-simulation-output [resultOutput]="resultOutput" (resetOutput)="reset()"></app-simulation-output>
        </div>
    </div>
</form>